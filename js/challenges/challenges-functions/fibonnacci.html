<!DOCTYPE html>
<html>

<head>
    <title></title>
    <script type="text/javascript">
    // function fibonacci(n) {
    // 	if (n === 0)
    // 		return [];

    //     var fibo = [0, 1];

    //     for (var i = 1; i < n; i++) {
    //         var sum = fibo[i] + fibo[i - 1]
    //         fibo.push(sum)
    //     }

    //     return fibo;
    // }

    // function fibonacci(n, arr) {
    //     if (n < 1) return [];

    //     if (!arr) arr = [0, 1];

    //     arr.push(arr[arr.length - 1] + arr[arr.length - 2]);

    //     if (arr.length < n) fibonacci(n, arr)

    //     return arr;
    // }

    function fibonacci(n) {
    	if (n < 1) return [];

        arr = [0, 1];

        function fiboGen() {
            if (n !== arr.length) {
                var sum = arr[arr.length - 2] + arr[arr.length - 1];
                arr.push(sum);
                fiboGen();
            }
        }
        
        fiboGen();

        return arr;
    }



    function testFibonacciReturnsSeriesSuccessfullyFor7Operations() {
        var n = 7;
        var expected = [0, 1, 1, 2, 3, 5, 8, 13];

        var res = fibonacci(n);

        if (!res || !(res instanceof Array))
            return console.error('testFibonacciReturnsSeriesSuccessfullyFor7Operations', 'KO', 'no valid result');

        for (var i = 0; i < res.length; i++) {
            if (res[i] !== expected[i])
                return console.error('testFibonacciReturnsSeriesSuccessfullyFor7Operations', 'KO', 'items do not match for index ' + i);
        }

        console.log('testFibonacciReturnsSeriesSuccessfullyFor7Operations', 'OK');
    }

    function testFibonacciReturnsEmptyArrayFor0Operations() {
        var n = 0;

        var res = fibonacci(n);

        if (!res || !(res instanceof Array) || res.length > 0)
            return console.error('testFibonacciReturnsEmptyArrayFor0Operations', 'KO', 'no valid result');

        console.log('testFibonacciReturnsEmptyArrayFor0Operations', 'OK');
    }


    testFibonacciReturnsSeriesSuccessfullyFor7Operations();

    testFibonacciReturnsEmptyArrayFor0Operations();
    </script>
</head>

<body>
</body>

</html>